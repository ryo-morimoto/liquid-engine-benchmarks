<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ page_title | default: "Blog" }}</title>
  <meta name="description" content="{{ page_description | default: 'Welcome to our blog' | truncate: 160 }}">
</head>
<body>
  <header class="site-header">
    <nav class="main-nav">
      <a href="/" class="logo">Blog</a>
      <ul class="nav-links">
        <li><a href="/posts">All Posts</a></li>
        <li><a href="/categories">Categories</a></li>
        <li><a href="/archive">Archive</a></li>
      </ul>
      <form class="search-form" action="/search" method="get">
        <input type="search" name="q" placeholder="Search...">
        <button type="submit">Search</button>
      </form>
    </nav>
  </header>

  <div class="site-layout">
    <main class="main-content">
      {% if posts %}
        <section class="recent-posts">
          <h2>Recent Posts</h2>
          {% for post in posts limit: 5 %}
            <article class="post-card">
              <h3><a href="/posts/{{ post.id }}">{{ post.title }}</a></h3>
              <div class="meta">
                <span class="author">{{ post.author }}</span>
                <time datetime="{{ post.published_at }}">{{ post.published_at }}</time>
              </div>
              <p>{{ post.content | truncate: 150 }}</p>
            </article>
          {% endfor %}
        </section>
      {% endif %}
    </main>

    <aside class="sidebar">
      <section class="widget categories-widget">
        <h3>Categories</h3>
        <ul>
          {% for category in categories %}
            <li><a href="/categories/{{ category.slug }}">{{ category.name }}</a></li>
          {% endfor %}
        </ul>
      </section>

      <section class="widget tags-widget">
        <h3>Tags</h3>
        <div class="tag-list">
          {% for tag in tags limit: 15 %}
            <a href="/tags/{{ tag.name }}" class="tag">{{ tag.name }}</a>
          {% endfor %}
        </div>
      </section>

      <section class="widget archive-widget">
        <h3>Archive</h3>
        <ul>
          {% for post in posts limit: 10 %}
            <li>
              <a href="/posts/{{ post.id }}">{{ post.title | truncate: 30 }}</a>
            </li>
          {% endfor %}
        </ul>
      </section>
    </aside>
  </div>

  <footer class="site-footer">
    <p>&copy; 2024 Blog. All rights reserved.</p>
  </footer>
</body>
</html>
