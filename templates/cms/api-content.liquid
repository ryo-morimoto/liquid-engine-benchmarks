<div class="api-content">
  <header class="content-header">
    <h1>{{ api_response.title | default: "Content" }}</h1>
    {% if api_response.last_updated %}
      <p class="last-updated">Last updated: {{ api_response.last_updated }}</p>
    {% endif %}
  </header>

  {% if api_response.status == "success" %}
    <div class="content-body">
      {% if api_response.type == "product_feed" %}
        <section class="product-feed">
          <h2>Products from External API</h2>
          <div class="product-grid">
            {% for item in api_response.data %}
              <article class="product-card">
                {% if item.image %}
                  <img src="{{ item.image }}" alt="{{ item.name }}">
                {% endif %}
                <h3>{{ item.name }}</h3>
                <p class="price">
                  {% if item.currency == "EUR" %}€{% elsif item.currency == "GBP" %}£{% else %}${% endif %}{{ item.price }}
                </p>
                {% if item.in_stock %}
                  <span class="stock in-stock">In Stock</span>
                {% else %}
                  <span class="stock out-of-stock">Out of Stock</span>
                {% endif %}
                <a href="{{ item.url }}" class="view-link" target="_blank">View Product</a>
              </article>
            {% endfor %}
          </div>
        </section>

      {% elsif api_response.type == "news_feed" %}
        <section class="news-feed">
          <h2>Latest News</h2>
          {% for article in api_response.data %}
            <article class="news-item">
              <h3><a href="{{ article.url }}">{{ article.headline }}</a></h3>
              <div class="meta">
                <span class="source">{{ article.source }}</span>
                <time datetime="{{ article.published }}">{{ article.published }}</time>
              </div>
              <p>{{ article.summary | truncate: 200 }}</p>
            </article>
          {% endfor %}
        </section>

      {% elsif api_response.type == "weather" %}
        <section class="weather-widget">
          <h2>Weather in {{ api_response.data.location }}</h2>
          <div class="current-weather">
            <span class="temperature">{{ api_response.data.temperature }}°</span>
            <span class="condition">{{ api_response.data.condition }}</span>
          </div>
          {% if api_response.data.forecast.size > 0 %}
            <div class="forecast">
              {% for day in api_response.data.forecast %}
                <div class="forecast-day">
                  <span class="day">{{ day.day }}</span>
                  <span class="high">{{ day.high }}°</span>
                  <span class="low">{{ day.low }}°</span>
                </div>
              {% endfor %}
            </div>
          {% endif %}
        </section>

      {% else %}
        <section class="generic-content">
          {% for item in api_response.data %}
            <div class="content-item">
              {% if item.title %}
                <h3>{{ item.title }}</h3>
              {% endif %}
              {% if item.content %}
                <p>{{ item.content }}</p>
              {% endif %}
            </div>
          {% endfor %}
        </section>
      {% endif %}
    </div>

  {% elsif api_response.status == "error" %}
    <div class="error-state">
      <h2>Unable to load content</h2>
      <p>{{ api_response.message | default: "An error occurred while fetching data." }}</p>
      <button onclick="location.reload()" class="retry-button">Try Again</button>
    </div>

  {% else %}
    <div class="loading-state">
      <p>Loading content...</p>
    </div>
  {% endif %}

  {% if api_response.pagination %}
    <nav class="pagination">
      {% if api_response.pagination.prev_url %}
        <a href="{{ api_response.pagination.prev_url }}" class="prev">Previous</a>
      {% endif %}
      <span class="page-info">
        Page {{ api_response.pagination.current }} of {{ api_response.pagination.total }}
      </span>
      {% if api_response.pagination.next_url %}
        <a href="{{ api_response.pagination.next_url }}" class="next">Next</a>
      {% endif %}
    </nav>
  {% endif %}
</div>
