<div class="user-profile">
  <header class="profile-header">
    <div class="avatar">
      {% if user.avatar %}
        <img src="{{ user.avatar }}" alt="{{ user.name }}">
      {% else %}
        <div class="avatar-placeholder">{{ user.name | slice: 0 | upcase }}</div>
      {% endif %}
    </div>
    <div class="user-info">
      <h1>{{ user.name }}</h1>
      <p class="email">{{ user.email }}</p>
      {% if user.member_since %}
        <p class="member-since">Member since {{ user.member_since }}</p>
      {% endif %}
    </div>
  </header>

  <nav class="profile-nav">
    <ul>
      <li class="active"><a href="#overview">Overview</a></li>
      <li><a href="#orders">Orders</a></li>
      <li><a href="#addresses">Addresses</a></li>
      <li><a href="#settings">Settings</a></li>
    </ul>
  </nav>

  <section class="profile-section" id="overview">
    <h2>Account Overview</h2>

    <div class="stats-grid">
      <div class="stat-card">
        <span class="stat-value">{{ user.order_count | default: 0 }}</span>
        <span class="stat-label">Total Orders</span>
      </div>
      <div class="stat-card">
        <span class="stat-value">${{ user.total_spent | default: 0 | divided_by: 100 }}</span>
        <span class="stat-label">Total Spent</span>
      </div>
      <div class="stat-card">
        <span class="stat-value">{{ user.reward_points | default: 0 }}</span>
        <span class="stat-label">Reward Points</span>
      </div>
    </div>

    {% if user.vip_status %}
      <div class="vip-banner">
        <span class="vip-badge">VIP Member</span>
        <p>Enjoy exclusive benefits and early access to sales!</p>
      </div>
    {% endif %}
  </section>

  <section class="profile-section" id="addresses">
    <h2>Saved Addresses</h2>

    <div class="address-card primary">
      <span class="badge">Primary</span>
      <address>
        {{ user.name }}<br>
        {{ user.street }}<br>
        {{ user.city }}, {{ user.zip }}<br>
        {{ user.country }}
      </address>
      <div class="address-actions">
        <a href="#edit" class="edit-link">Edit</a>
      </div>
    </div>

    {% if user.additional_addresses.size > 0 %}
      {% for address in user.additional_addresses %}
        <div class="address-card">
          <address>
            {{ address.name }}<br>
            {{ address.street }}<br>
            {{ address.city }}, {{ address.zip }}<br>
            {{ address.country }}
          </address>
          <div class="address-actions">
            <a href="#edit" class="edit-link">Edit</a>
            <a href="#delete" class="delete-link">Delete</a>
          </div>
        </div>
      {% endfor %}
    {% endif %}

    <a href="#add" class="add-address-button">Add New Address</a>
  </section>

  <section class="profile-section" id="recent-orders">
    <h2>Recent Orders</h2>

    {% if recent_orders.size > 0 %}
      <table class="orders-table">
        <thead>
          <tr>
            <th>Order</th>
            <th>Date</th>
            <th>Status</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          {% for order in recent_orders %}
            <tr>
              <td><a href="/orders/{{ order.id }}">#{{ order.id }}</a></td>
              <td>{{ order.date }}</td>
              <td>
                <span class="status-badge {{ order.status | downcase }}">{{ order.status }}</span>
              </td>
              <td>${{ order.total | divided_by: 100 }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="no-orders">You haven't placed any orders yet.</p>
      <a href="/collections" class="shop-button">Start Shopping</a>
    {% endif %}
  </section>
</div>
