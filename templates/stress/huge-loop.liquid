{% comment %}
Stress test: 10,000 iteration loop
Tests the template engine's loop performance at scale
{% endcomment %}

<div class="huge-loop-container">
  <h1>Processing {{ items.size }} items</h1>

  {% assign total = 0 %}
  {% assign even_count = 0 %}
  {% assign odd_count = 0 %}

  <ul class="item-list">
    {% for item in items %}
      {% assign total = total | plus: item.value %}
      {% assign mod = forloop.index | modulo: 2 %}
      {% if mod == 0 %}
        {% assign even_count = even_count | plus: 1 %}
        <li class="item even" data-index="{{ forloop.index }}">
      {% else %}
        {% assign odd_count = odd_count | plus: 1 %}
        <li class="item odd" data-index="{{ forloop.index }}">
      {% endif %}
          <span class="index">#{{ forloop.index }}</span>
          <span class="value">{{ item.value }}</span>
          <span class="name">{{ item.name | truncate: 20 }}</span>
          {% if forloop.first %}
            <span class="badge first">First</span>
          {% endif %}
          {% if forloop.last %}
            <span class="badge last">Last</span>
          {% endif %}
        </li>
    {% endfor %}
  </ul>

  <div class="summary">
    <p>Total items: {{ items.size }}</p>
    <p>Sum of values: {{ total }}</p>
    <p>Even items: {{ even_count }}</p>
    <p>Odd items: {{ odd_count }}</p>
  </div>
</div>
