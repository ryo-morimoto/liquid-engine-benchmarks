# Liquid Template Engine Benchmarks

Performance comparison benchmarks for PHP and Ruby Liquid template engine implementations.

## Why This Project

Multiple Liquid implementations exist, but no comprehensive benchmark compares their performance.
This project provides **reproducible, fair benchmarks** with identical templates and real-world data.

## Target Libraries

| Language | Library | Note |
|----------|---------|------|
| Ruby | [Shopify/liquid](https://github.com/Shopify/liquid) | Official reference implementation |
| PHP | [keepsuit/php-liquid](https://github.com/keepsuit/php-liquid) | Modern PHP 8.x implementation |
| PHP | [kalimatas/php-liquid](https://github.com/kalimatas/php-liquid) | Established PHP implementation |

## Benchmark Categories

| Category | Description |
|----------|-------------|
| **primitive** | Variables, filters, conditions, loops |
| **ecommerce** | Products, collections, cart, checkout |
| **blog** | Posts, archives, categories, tags |
| **email** | Order confirmation, shipping, multi-language |
| **stress** | 10K+ loops, deep nesting, filter chains |

<details>
<summary><strong>primitive</strong> - Basic element performance</summary>

| Benchmark | Template | Measures | Scale |
|-----------|----------|----------|-------|
| Variable | `{{ name }}` | Variable interpolation speed | - |
| FilterChain | `{{ x \| a \| b \| c }}` | Filter pipeline overhead | 5 filters |
| ConditionSimple | `{% if x %}` | Single condition evaluation | - |
| ConditionNested | `{% if %}{% if %}{% if %}` | Nested condition depth impact | 3 levels |
| LoopSimple | `{% for item in items %}` | Basic iteration | 100 items |
| LoopNested | `{% for %}{% for %}` | Nested loop overhead | 10 x 10 |

</details>

<details>
<summary><strong>ecommerce</strong> - Shopify theme simulation</summary>

| Benchmark | Scenario | Template Complexity |
|-----------|----------|---------------------|
| Product | Product detail page | Variants, images, reviews, add-to-cart |
| Collection | Product listing page | Filtering, sorting, pagination |
| Cart | Shopping cart | Line items, totals, discounts |
| Checkout | Checkout flow | Address, payment, confirmation |
| Theme | Full page render | Layout + header + content + footer |

**Data scale**: 50 products, 10 collections, 10 cart items (medium)

</details>

<details>
<summary><strong>blog</strong> - Jekyll/Hugo style static site</summary>

| Benchmark | Scenario | Template Complexity |
|-----------|----------|---------------------|
| Post | Article page | Body, meta, related posts |
| Archive | Date-based listing | Group by year/month |
| Category | Category page | Hierarchical categories |
| TagCloud | Tag aggregation | All tags with counts |

**Data scale**: 100 posts, 10 categories, 50 tags

</details>

<details>
<summary><strong>email</strong> - Transactional email templates</summary>

| Benchmark | Scenario | Template Complexity |
|-----------|----------|---------------------|
| OrderConfirmation | Order receipt | Line items, totals, shipping address |
| ShippingNotification | Shipping update | Tracking info, delivery estimate |
| Personalized | Marketing email | Heavy conditional logic for personalization |
| MultiLanguage | i18n email | Language switching, RTL support |

</details>

<details>
<summary><strong>stress</strong> - Edge cases and limits</summary>

**Conditionals**

| Benchmark | Pattern | Scale |
|-----------|---------|-------|
| IfElsifChain | `if/elsif/elsif/...` | 100+ branches |
| CaseWhen | `case/when` switch | 50+ cases |
| NestedIf | Deep `if` nesting | 10+ levels |
| MixedConditionals | All patterns combined | - |

**Loops**

| Benchmark | Pattern | Scale |
|-----------|---------|-------|
| HugeLoop | Single large loop | 10,000 items |
| NestedLoop | Double nested | 100 x 100 |
| TripleLoop | Triple nested | 20 x 20 x 20 |

**Extreme cases**

| Benchmark | Pattern | Scale |
|-----------|---------|-------|
| FilterHell | Chained filters | 20+ filters |
| IncludeHeavy | Many partials | 50+ includes |
| DeepNesting | Deep template nesting | 10+ levels |
| WorstCase | All combined | Maximum complexity |

</details>

## Results

<!-- CI_RESULTS_START -->
Results will be automatically generated by CI.
<!-- CI_RESULTS_END -->

## Contributing

See [CONTRIBUTING.md](CONTRIBUTING.md) for guidelines.

## License

MIT
