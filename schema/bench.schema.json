{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/ryo-morimoto/liquid-engine-benchmarks/schema/bench.schema.json",
  "title": "Benchmark Configuration",
  "description": "Schema for bench.yaml configuration file",
  "type": "object",
  "required": ["runtimes", "baseline", "libraries"],
  "additionalProperties": false,
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference for editor support"
    },
    "runtimes": {
      "type": "object",
      "description": "Runtime versions for each language",
      "propertyNames": { "$ref": "base.schema.json#/definitions/lang" },
      "additionalProperties": { "$ref": "base.schema.json#/definitions/runtimeVersion" },
      "examples": [
        { "php": "8.3", "ruby": "3.3" }
      ]
    },
    "baseline": {
      "type": "object",
      "description": "Baseline library for comparison",
      "required": ["library", "version"],
      "additionalProperties": false,
      "properties": {
        "library": {
          "type": "string",
          "description": "Library name (must match a name in libraries)"
        },
        "version": {
          "$ref": "base.schema.json#/definitions/semver",
          "description": "Version to use as baseline"
        }
      }
    },
    "libraries": {
      "type": "array",
      "description": "Target libraries to benchmark",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["lang", "name", "package", "versions"],
        "additionalProperties": false,
        "properties": {
          "lang": {
            "$ref": "base.schema.json#/definitions/lang",
            "description": "Programming language"
          },
          "name": {
            "$ref": "base.schema.json#/definitions/libraryName",
            "description": "Short name for the library (used in adapter selection)"
          },
          "package": {
            "type": "string",
            "description": "Package name for the package manager",
            "examples": ["keepsuit/php-liquid", "liquid"]
          },
          "versions": {
            "type": "array",
            "description": "Versions to benchmark",
            "minItems": 1,
            "items": {
              "$ref": "base.schema.json#/definitions/semver"
            }
          }
        }
      }
    }
  }
}
